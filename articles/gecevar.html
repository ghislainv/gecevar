<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Get started with gecevar • gecevar</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Get started with gecevar">
<meta property="og:description" content="gecevar">
<meta property="og:image" content="/logo.svg">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gecevar</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/gecevar.html">Get started</a>
</li>
<li>
  <a href="../articles/index.html">Articles</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ghislainv/gecevar" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Get started with gecevar</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ghislainv/gecevar/blob/HEAD/vignettes/gecevar.Rmd" class="external-link"><code>vignettes/gecevar.Rmd</code></a></small>
      <div class="hidden name"><code>gecevar.Rmd</code></div>

    </div>

    
    
<div class="section level3">
<h3 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h3>
<p>Install the development version of <strong>gecevar</strong> from <a href="https://github.com/ghislainv/gecevar" class="external-link">GitHub</a> with
<code>devtools::install_github("ghislainv/gecevar")</code></p>
</div>
<div class="section level2">
<h2 id="import-libraries">Import libraries<a class="anchor" aria-label="anchor" href="#import-libraries"></a>
</h2>
<p>First thing to do is import <strong>gecevar</strong> and
<strong>terra</strong> libraries.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ecology.ghislainv.fr/gecevar" class="external-link">gecevar</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rspatial.org/" class="external-link">terra</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://here.r-lib.org/" class="external-link">here</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="get-extent-and-latitudelongitude-coordinates">Get extent and latitude/longitude coordinates<a class="anchor" aria-label="anchor" href="#get-extent-and-latitudelongitude-coordinates"></a>
</h2>
<p>In this example, we take New Caledonia as example. It’s an island
near Australia and New Zealand. We need to begin to get the EPSG code
for New Caledonia. It can be found on <a href="https://epsg.io" class="external-link">epsg.io</a>. Beware to keep the same EPSG code
for all functions in the <code>gecevar</code> package.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">name</span> <span class="op">&lt;-</span> <span class="st">"New Caledonia"</span></span>
<span><span class="va">epsg</span> <span class="op">&lt;-</span> <span class="fl">3163</span></span>
<span><span class="va">all_extent</span> <span class="op">&lt;-</span> <span class="fu">transform_shp_country_extent</span><span class="op">(</span>EPSG <span class="op">=</span> <span class="va">epsg</span>,</span>
<span>                                           country_name <span class="op">=</span> <span class="va">name</span><span class="op">)</span></span>
<span><span class="va">extent</span> <span class="op">&lt;-</span> <span class="va">all_extent</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">extent_latlon</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric.html" class="external-link">as.numeric</a></span><span class="op">(</span><span class="va">all_extent</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fl">5</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p>The output is a vector of length 5. First element is a character with
extent of New Caledonia according to EPSG:3163. The following four
elements are extent in latitude and longitude coordinates
(EPSG:4326).</p>
</div>
<div class="section level2">
<h2 id="download-environmental-variables">Download environmental variables<a class="anchor" aria-label="anchor" href="#download-environmental-variables"></a>
</h2>
<p>One variable is protected area named WDPA in downloaded file. This
variable need an identification by country name. Make sure that our
country name is available in <a href="https://www.protectedplanet.net/en/thematic-areas/wdpa?tab=WDPA" class="external-link">www.protectedplanet.net</a>.
Otherwise leave <code>country_name = NULL</code>.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">environ_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_env_variables.html">get_env_variables</a></span><span class="op">(</span>extent_latlon <span class="op">=</span> <span class="va">extent_latlon</span>,</span>
<span>                                  extent <span class="op">=</span> <span class="va">extent</span>,</span>
<span>                                  EPSG <span class="op">=</span> <span class="va">epsg</span>, </span>
<span>                                  country_name <span class="op">=</span> <span class="st">"New Caledonia"</span>,</span>
<span>                                  destination <span class="op">=</span> <span class="fu">here</span><span class="op">(</span><span class="st">"vignettes"</span>,</span>
<span>                                                     <span class="st">"get_started_files"</span><span class="op">)</span>,</span>
<span>                                  resolution <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>                                  rm_download <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>                                  gisBase <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div>
<p>We can look at the variable names in the raster.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">r_env</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">environ_path</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">r_env</span><span class="op">)</span></span></code></pre></div>
<p>We can plot some data, eg. the elevation.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">r_env</span><span class="op">$</span><span class="va">elevation</span>, range <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2000</span><span class="op">)</span>, main <span class="op">=</span> <span class="st">"Elevation (m)"</span>,</span>
<span>     cex.main <span class="op">=</span> <span class="fl">2</span>, plg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>cex <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>, pax <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>cex.axis <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><img src="get_started_files/figs/elevation.png" width="800"></p>
</div>
<div class="section level2">
<h2 id="download-climatic-variables">Download climatic variables<a class="anchor" aria-label="anchor" href="#download-climatic-variables"></a>
</h2>
<p>Climatic variables are extract from <a href="https://chelsa-climate.org/" class="external-link">chelsa-climate.org</a>.</p>
<p>We get with <code>get_chelsa_current</code> function many variables.
Variables give the average value on the data recovered between 1981 and
2010.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">climate_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_chelsa_current.html">get_chelsa_current</a></span><span class="op">(</span>extent <span class="op">=</span> <span class="va">extent</span>,</span>
<span>                                  EPSG <span class="op">=</span> <span class="va">epsg</span>,</span>
<span>                                  destination <span class="op">=</span> <span class="fu">here</span><span class="op">(</span><span class="st">"vignettes"</span>,</span>
<span>                                                     <span class="st">"get_started_files"</span><span class="op">)</span>,</span>
<span>                                  resolution <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>                                  rm_download <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>We can look at the variable names in the raster.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">r_clim</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/terra/man/rast.html" class="external-link">rast</a></span><span class="op">(</span><span class="va">climate_path</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">r_clim</span><span class="op">)</span></span></code></pre></div>
<p>We can plot some data, eg. the climatic water deficit computed from
the Thornthwaite equation.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(r_clim<span class="sc">$</span>cwd_thornthwaite), range <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">500</span>), main <span class="ot">=</span> <span class="st">"CWD Thornthwaite (m)"</span>,</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>     cex.main <span class="ot">=</span> <span class="dv">2</span>, plg <span class="ot">=</span> <span class="fu">list</span>(<span class="at">cex =</span> <span class="dv">1</span>), pax <span class="ot">=</span> <span class="fu">list</span>(<span class="at">cex.axis =</span> <span class="dv">1</span>)<span class="er">)</span></span></code></pre></div>
<p><img src="get_started_files/figs/cwd_thornthwaite.png" width="800"></p>
</div>
<div class="section level2">
<h2 id="merge-environmental-and-climatic-variables">Merge environmental and climatic variables<a class="anchor" aria-label="anchor" href="#merge-environmental-and-climatic-variables"></a>
</h2>
<p>Now you can merge all our variables in one file.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">merge_path</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/merge_files.html">merge_files</a></span><span class="op">(</span>environ_path <span class="op">=</span> <span class="va">environ_path</span>,</span>
<span>                          climat_path <span class="op">=</span> <span class="va">climat_path</span>, </span>
<span>                          destination <span class="op">=</span> <span class="st">"/home/pierre/Bureau/NC"</span><span class="op">)</span></span></code></pre></div>
<p>Output is the absolute path to the <code>gecevar.tif</code> file
which was created.</p>
</div>
<div class="section level2">
<h2 id="download-future-climate">Download future climate<a class="anchor" aria-label="anchor" href="#download-future-climate"></a>
</h2>
<p>Extracted from <a href="https://chelsa-climate.org/" class="external-link">chelsa-climate.org</a> the climate
data from the five available models, namely, GFDL-ESM4, IPSL-CM6A-LR,
MPI-ESM1-2-HR, MRI-ESM2-0 and UKESM1-0-LL. Compute the average of these
models for a SSP chosen.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">get_chelsa_futur</span><span class="op">(</span>extent <span class="op">=</span> <span class="va">extent</span>,</span>
<span>                 EPSG <span class="op">=</span> <span class="va">epsg</span>, </span>
<span>                 destination <span class="op">=</span> <span class="st">"/home/pierre/Bureau/NC"</span>,</span>
<span>                 resolution <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>                 phase <span class="op">=</span> <span class="st">"2071-2100"</span>,</span>
<span>                 SSP <span class="op">=</span> <span class="fl">585</span>,</span>
<span>                 rm_download <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by <a href="https://ecology.ghislainv.fr" class="external-link">Ghislain Vieilledent</a>, Pierre Guillaumont, <a href="https://jeanneclement.github.io/" class="external-link">Jeanne Clément</a>, <a href="https://www.researchgate.net/profile/Philippe-Birnbaum" class="external-link">Philippe Birnbaum</a>, <a href="https://www.researchgate.net/profile/Thomas-Ibanez" class="external-link">Thomas Ibanez</a>, <a href="https://www.researchgate.net/profile/Gaelle-Jaouen" class="external-link">Gaëlle Jaouen</a>, <a href="http://www.ecofog.gf/spip.php?article965" class="external-link">Clément Stahl</a>, <a href="https://www.labex-ceba.fr" class="external-link"><img src="https://ecology.ghislainv.fr/gecevar/articles/logos/Logo_CEBA_simple.jpg" height="24" style="height:24px;"></a>, <a href="https://cnrt.nc" class="external-link"><img src="https://ecology.ghislainv.fr/gecevar/articles/logos/Logo_CNRT.png" height="24" style="height:24px;"></a>, <a href="https://www.cirad.fr" class="external-link"><img src="https://ecology.ghislainv.fr/gecevar/articles/logos/logo-cirad.svg" height="24" style="height:24px;"></a>.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
